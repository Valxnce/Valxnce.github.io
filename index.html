<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Ivy League Explorer</title>
<style>
  /* ===========================
     Ivy League Explorer — Inline CSS
     Modern, compact, responsive
     =========================== */
  :root{
    --bg: #0f1724;
    --card: #071126;
    --muted: #94a3b8;
    --accent: #60a5fa;
    --glass: rgba(255,255,255,0.03);
    --success: #34d399;
    --danger: #fb7185;
    --radius: 12px;
    --maxw: 1100px;
    font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    color-scheme: dark;
  }
  html,body{height:100%;margin:0;background:linear-gradient(180deg,#021025 0%, #07172a 60%);color:#e6eef6}
  .wrap{max-width:var(--maxw);margin:24px auto;padding:18px;box-sizing:border-box}
  header{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
  header h1{margin:0;font-size:20px;color:var(--accent)}
  header p{margin:0;color:var(--muted);font-size:13px}
  .toolbar{display:flex;gap:8px;align-items:center;margin-top:12px;flex-wrap:wrap}
  .search{flex:1;min-width:220px;display:flex;gap:8px;align-items:center}
  .search input{flex:1;padding:10px 12px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit;outline:none}
  .btn{background:var(--accent);border:none;padding:10px 12px;border-radius:10px;color:#042027;font-weight:700;cursor:pointer}
  .chip{background:var(--glass);padding:8px 10px;border-radius:999px;border:1px solid rgba(255,255,255,0.03);color:var(--muted);cursor:pointer}
  .controls{display:flex;gap:8px;align-items:center}
  main{margin-top:18px}
  .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:14px}
  @media (max-width:900px){ .grid{grid-template-columns:repeat(2,1fr)} }
  @media (max-width:520px){ .grid{grid-template-columns:1fr} .toolbar{flex-direction:column;align-items:stretch} }

  /* Card */
  .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:var(--radius);padding:14px;display:flex;flex-direction:column;gap:10px;border:1px solid rgba(255,255,255,0.03)}
  .card .top{display:flex;align-items:center;gap:12px}
  .logo{width:64px;height:64px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-weight:800;color:#042027}
  .meta{flex:1}
  .meta h3{margin:0;font-size:16px}
  .meta p{margin:2px 0 0 0;font-size:13px;color:var(--muted)}
  .tags{display:flex;gap:8px;flex-wrap:wrap}
  .tag{font-size:12px;padding:6px 8px;border-radius:8px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.03);color:var(--muted)}
  .actions{display:flex;gap:8px;align-items:center}
  .small{font-size:13px;color:var(--muted)}

  /* Compare bar */
  .compare-bar{position:fixed;left:18px;right:18px;bottom:18px;background:linear-gradient(180deg,#02111b,#041827);border-radius:14px;padding:10px;border:1px solid rgba(255,255,255,0.04);display:flex;align-items:center;gap:10px;box-shadow:0 8px 30px rgba(0,0,0,0.6)}
  .compare-list{display:flex;gap:8px;flex:1;flex-wrap:wrap}
  .compare-item{background:rgba(255,255,255,0.02);padding:6px 10px;border-radius:10px;font-size:13px;display:flex;gap:8px;align-items:center}
  .compare-button{background:var(--success);border:none;padding:8px 12px;border-radius:10px;color:#022;cursor:pointer;font-weight:700}

  /* Modal */
  .modal-backdrop{position:fixed;inset:0;background:rgba(2,6,23,0.6);display:none;align-items:center;justify-content:center;padding:24px;z-index:40}
  .modal{width:100%;max-width:900px;background:linear-gradient(180deg,#061425,#07172a);border-radius:12px;padding:16px;border:1px solid rgba(255,255,255,0.03);box-shadow:0 12px 40px rgba(2,8,23,0.7)}
  .modal-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  .modal h2{margin:0}
  .close{background:transparent;border:1px solid rgba(255,255,255,0.03);padding:6px 8px;border-radius:8px;color:var(--muted);cursor:pointer}

  footer{margin-top:18px;color:var(--muted);font-size:13px;display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap}
  a.link{color:var(--accent);text-decoration:none}
</style>
</head>
<body>
<div class="wrap" role="main">
  <header>
    <div>
      <h1>Ivy League Explorer</h1>
      <p>Quick, searchable profiles of the eight Ivy League universities — compare, favorite, export.</p>
    </div>

    <div class="toolbar" style="margin-left:auto">
      <div class="search" role="search">
        <input id="search" placeholder="Search by name, city, keyword (e.g. research, engineering)" aria-label="Search Ivy schools" />
        <button id="clearSearch" class="chip" title="Clear">✕</button>
      </div>

      <div class="controls">
        <select id="sort" class="chip" aria-label="Sort">
          <option value="name">Sort: Name (A→Z)</option>
          <option value="year">Sort: Founded (old→new)</option>
          <option value="city">Sort: City (A→Z)</option>
        </select>

        <button id="exportCSV" class="btn" title="Export CSV">Export CSV</button>
      </div>
    </div>
  </header>

  <main>
    <section id="cards" class="grid" aria-live="polite"></section>
    <div id="empty" style="display:none;margin-top:18px;color:var(--muted)">No results. Try clearing filters.</div>
  </main>

  <footer>
    <div>Built with ❤️ — single-file demo</div>
    <div class="small">Data is summary only — visit official sites for latest admissions & stats.</div>
  </footer>
</div>

<!-- Compare bar -->
<div id="compareBar" class="compare-bar" style="display:none" aria-hidden="true">
  <div><strong>Compare</strong></div>
  <div id="compareList" class="compare-list" role="list"></div>
  <button id="openCompare" class="compare-button" title="Open compare">Open</button>
</div>

<!-- Modal for compare / details -->
<div id="modalBackdrop" class="modal-backdrop" role="dialog" aria-modal="true" aria-hidden="true">
  <div class="modal" role="document">
    <div style="display:flex;justify-content:space-between;align-items:center;gap:8px;margin-bottom:10px">
      <h2 id="modalTitle">Compare</h2>
      <div>
        <button id="closeModal" class="close">Close</button>
      </div>
    </div>
    <div id="modalContent" class="modal-grid"></div>
  </div>
</div>

<script>
/* ===========================
   Ivy League Explorer — Inline JS
   - Data array for 8 Ivy schools
   - Search, sort, favorite (localStorage)
   - Compare up to 3 schools
   - Export CSV
   =========================== */

const SCHOOLS = [
  {id:'harvard', name:'Harvard University', city:'Cambridge, MA', year:1636,
   desc:'Oldest institution of higher learning in the U.S. Strong across sciences, law, business, medicine.',
   colors: ['#A51C30','#000000'], url:'https://www.harvard.edu'},
  {id:'yale', name:'Yale University', city:'New Haven, CT', year:1701,
   desc:'Known for humanities, law, drama, and a strong research presence.',
   colors: ['#0F4D92','#FFFFFF'], url:'https://www.yale.edu'},
  {id:'princeton', name:'Princeton University', city:'Princeton, NJ', year:1746,
   desc:'Excellent undergraduate focus and strong programs in engineering, humanities, and natural sciences.',
   colors: ['#E87722','#000000'], url:'https://www.princeton.edu'},
  {id:'columbia', name:'Columbia University', city:'New York, NY', year:1754,
   desc:'Ivy in Manhattan — strengths in research, journalism, business, and engineering.',
   colors: ['#6F9FD8','#FFFFFF'], url:'https://www.columbia.edu'},
  {id:'upenn', name:'University of Pennsylvania', city:'Philadelphia, PA', year:1740,
   desc:'Known for business (Wharton), medicine, engineering; strong interdisciplinary focus.',
   colors: ['#011F5B','#A31F34'], url:'https://www.upenn.edu'},
  {id:'brown', name:'Brown University', city:'Providence, RI', year:1764,
   desc:'Open curriculum, strengths in liberal arts, medicine, and growing research programs.',
   colors: ['#381C00','#FFFFFF'], url:'https://www.brown.edu'},
  {id:'dartmouth', name:'Dartmouth College', city:'Hanover, NH', year:1769,
   desc:'Small, undergraduate-focused Ivy with strong liberal arts and research opportunities.',
   colors: ['#00693e','#FFFFFF'], url:'https://home.dartmouth.edu'},
  {id:'cornell', name:'Cornell University', city:'Ithaca, NY', year:1865,
   desc:'Large research university with strong engineering, agriculture, hotel management, and life sciences.',
   colors: ['#B31B1B','#000000'], url:'https://www.cornell.edu'}
];

/* ---------- State ---------- */
let state = {
  q: '',
  sort: 'name',
  favorites: new Set(JSON.parse(localStorage.getItem('ivy.favs')||'[]')),
  compare: new Set(JSON.parse(localStorage.getItem('ivy.comp')||'[]'))
};

/* ---------- Utility helpers ---------- */
function $(sel, el=document){ return el.querySelector(sel); }
function $all(sel, el=document){ return Array.from(el.querySelectorAll(sel)); }

function renderCards(){
  const container = $('#cards');
  container.innerHTML = '';
  const q = state.q.trim().toLowerCase();
  let list = SCHOOLS.filter(s=>{
    if(!q) return true;
    return s.name.toLowerCase().includes(q) || s.city.toLowerCase().includes(q) || s.desc.toLowerCase().includes(q);
  });

  // sort
  list.sort((a,b)=>{
    if(state.sort === 'name') return a.name.localeCompare(b.name);
    if(state.sort === 'year') return a.year - b.year;
    if(state.sort === 'city') return a.city.localeCompare(b.city);
    return 0;
  });

  if(list.length === 0){ $('#empty').style.display = 'block'; } else { $('#empty').style.display = 'none'; }

  for(const s of list){
    const card = document.createElement('article');
    card.className = 'card';
    card.innerHTML = `
      <div class="top">
        <div class="logo" style="background:${s.colors[0]};color:${s.colors[1]};font-size:20px;">
          ${logoText(s.name)}
        </div>
        <div class="meta">
          <h3>${s.name}</h3>
          <p class="small">${s.city} • Founded ${s.year}</p>
        </div>
        <div class="actions">
          <button class="chip" data-id="${s.id}" data-action="details">Details</button>
          <button class="chip" data-id="${s.id}" data-action="fav">${state.favorites.has(s.id)?'★ Favorited':'☆ Favorite'}</button>
          <button class="chip" data-id="${s.id}" data-action="compare">${state.compare.has(s.id)?'✓ In compare':'＋ Compare'}</button>
        </div>
      </div>
      <div>
        <p class="small">${s.desc}</p>
      </div>
      <div style="display:flex;justify-content:space-between;align-items:center;gap:8px">
        <div class="tags">
          <span class="tag">Open curriculum: ${s.id==='brown'?'Yes':'Varies'}</span>
          <span class="tag">Website</span>
        </div>
        <div style="display:flex;gap:8px;align-items:center">
          <a class="link" href="${s.url}" target="_blank" rel="noopener">Visit</a>
        </div>
      </div>
    `;
    container.appendChild(card);
  }

  // wire card buttons
  $all('.card .chip').forEach(btn=>{
    btn.onclick = (ev)=>{
      const id = btn.dataset.id;
      const action = btn.dataset.action;
      const school = SCHOOLS.find(x=>x.id===id);
      if(action==='details') openDetails(school);
      if(action==='fav'){ toggleFavorite(id); renderCards(); }
      if(action==='compare'){ toggleCompare(id); renderCards(); }
    };
  });

  updateCompareBar();
}

/* Small logo text helper */
function logoText(name){
  return name.split(' ').map(w=>w[0]).slice(0,2).join('').toUpperCase();
}

/* ---------- Search & sort ---------- */
$('#search').addEventListener('input', (e)=>{ state.q = e.target.value; renderCards(); });
$('#clearSearch').addEventListener('click', ()=>{ $('#search').value=''; state.q=''; renderCards(); });
$('#sort').addEventListener('change', (e)=>{ state.sort = e.target.value; renderCards(); });

/* ---------- Favorites (localStorage) ---------- */
function toggleFavorite(id){
  if(state.favorites.has(id)) state.favorites.delete(id); else state.favorites.add(id);
  localStorage.setItem('ivy.favs', JSON.stringify(Array.from(state.favorites)));
}

/* ---------- Compare ---------- */
function toggleCompare(id){
  if(state.compare.has(id)) state.compare.delete(id); else {
    if(state.compare.size >= 3){ alert('Compare supports up to 3 schools. Remove one first.'); return; }
    state.compare.add(id);
  }
  localStorage.setItem('ivy.comp', JSON.stringify(Array.from(state.compare)));
  updateCompareBar();
}

function updateCompareBar(){
  const bar = $('#compareBar');
  const listEl = $('#compareList');
  listEl.innerHTML = '';
  if(state.compare.size === 0){ bar.style.display = 'none'; bar.setAttribute('aria-hidden','true'); return; }
  bar.style.display = 'flex'; bar.setAttribute('aria-hidden','false');
  for(const id of state.compare){
    const s = SCHOOLS.find(x=>x.id===id);
    const el = document.createElement('div');
    el.className = 'compare-item';
    el.innerHTML = `<strong>${s.name.split(' ')[0]}</strong><button class="chip" data-id="${s.id}" title="Remove">✕</button>`;
    listEl.appendChild(el);
    el.querySelector('button').onclick = ()=>{ toggleCompare(s.id); renderCards(); };
  }
}

/* Open compare modal */
$('#openCompare').addEventListener('click', ()=>{
  const items = Array.from(state.compare).map(id=>SCHOOLS.find(s=>s.id===id));
  openCompareModal(items);
});

/* ---------- Details / Compare modal ---------- */
const backdrop = $('#modalBackdrop');
function openDetails(school){
  const content = $('#modalContent');
  $('#modalTitle').textContent = school.name;
  content.innerHTML = `
    <div>
      <h3>${school.name}</h3>
      <p class="small">${school.city} • Founded ${school.year}</p>
      <p class="small" style="margin-top:8px">${school.desc}</p>
      <p style="margin-top:8px"><a class="link" href="${school.url}" target="_blank">${school.url}</a></p>
    </div>
    <div>
      <h4>Quick facts</h4>
      <ul class="small">
        <li>Type: Private research university</li>
        <li>Notable: Strong research and graduate programs</li>
        <li>Colors: ${school.colors.join(', ')}</li>
      </ul>
      <div style="margin-top:12px">
        <button class="btn" onclick="toggleCompare('${school.id}'); renderCards();">Toggle Compare</button>
        <button class="chip" onclick="toggleFavorite('${school.id}'); renderCards();">Toggle Favorite</button>
      </div>
    </div>
  `;
  showModal();
}

function openCompareModal(items){
  $('#modalTitle').textContent = 'Compare — ' + items.map(i=>i.name.split(' ')[0]).join(' / ');
  const content = $('#modalContent');
  // For compare, show side-by-side summary cards
  content.innerHTML = items.map(s=>`
    <div style="padding:8px;border-radius:8px;background:rgba(255,255,255,0.01)">
      <h3>${s.name}</h3>
      <p class="small">${s.city} • Founded ${s.year}</p>
      <p class="small" style="margin-top:8px">${s.desc}</p>
      <p style="margin-top:10px"><a class="link" href="${s.url}" target="_blank">Official site</a></p>
    </div>
  `).join('') + (items.length<2?`<div style="padding:8px;color:${'#f59e0b'}">Select at least 2 schools to compare</div>`:'');

  showModal();
}

function showModal(){
  backdrop.style.display = 'flex';
  backdrop.setAttribute('aria-hidden','false');
}
$('#closeModal').addEventListener('click', closeModal);
backdrop.addEventListener('click', (e)=>{ if(e.target === backdrop) closeModal(); });
function closeModal(){ backdrop.style.display = 'none'; backdrop.setAttribute('aria-hidden','true'); }

/* ---------- Export selected (CSV) ---------- */
$('#exportCSV').addEventListener('click', ()=>{
  // Export either compared schools if any, otherwise all visible
  let rows = [];
  const compareIds = Array.from(state.compare);
  const list = compareIds.length ? compareIds.map(id=>SCHOOLS.find(s=>s.id===id)) : SCHOOLS;
  rows.push(['Name','City','Founded','Description','Website']);
  for(const s of list) rows.push([s.name, s.city, s.year, s.desc, s.url]);
  const csv = rows.map(r => r.map(cell => `"${String(cell).replace(/"/g,'""')}"`).join(',')).join('\n');
  const blob = new Blob([csv], {type:'text/csv;charset=utf-8;'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url; a.download = 'ivy_schools.csv'; document.body.appendChild(a); a.click(); a.remove();
  URL.revokeObjectURL(url);
});

/* ---------- Init ---------- */
renderCards();

/* Expose small helpers for modal buttons */
window.toggleCompare = toggleCompare;
window.toggleFavorite = toggleFavorite;

/* Accessibility: keyboard shortcut to open compare (c) */
window.addEventListener('keydown', (e)=>{
  if(e.key.toLowerCase() === 'c' && state.compare.size > 0){ $('#openCompare').click(); }
});
</script>
</body>
</html>
